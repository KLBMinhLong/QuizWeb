<%- include("../partical/header", { title: "Admin - Tạo câu hỏi" }) %>

<script src="/static/js/admin-questions.js"></script>

<!-- Breadcrumb -->
<nav class="breadcrumb">
  <a href="/" class="breadcrumb__item">Trang chủ</a>
  <span class="breadcrumb__separator">›</span>
  <a href="/admin" class="breadcrumb__item">Quản trị</a>
  <span class="breadcrumb__separator">›</span>
  <a href="/admin/questions" class="breadcrumb__item">Quản lý câu hỏi</a>
  <span class="breadcrumb__separator">›</span>
  <span class="breadcrumb__item breadcrumb__item--current">Tạo mới</span>
</nav>

<div class="admin-header">
  <h1 class="admin-header__title">Tạo câu hỏi mới</h1>
</div>

<% if (error) { %>
<div class="alert alert-error"><%= error %></div>
<% } %>

<div class="card mt-xl">
  <h3 class="card__title">Thông tin câu hỏi</h3>
  <form method="post" action="/admin/questions/create">
    <input type="hidden" id="answers-json" name="answers" value="[]" />
    
    <div class="form-group">
      <label class="form-label">Môn học <span style="color: red;">*</span></label>
      <select name="subjectId" id="subjectId" class="form-input" required>
        <option value="">-- Chọn môn học --</option>
        <% if (subjects && subjects.length > 0) { %>
          <% subjects.forEach(function(s) { %>
            <option value="<%= s._id %>"><%= s.name %></option>
          <% }) %>
        <% } %>
      </select>
    </div>
    
    <div class="form-group">
      <label class="form-label">Độ khó <span style="color: red;">*</span></label>
      <select name="difficulty" id="difficulty" class="form-input" required>
        <option value="easy">Dễ</option>
        <option value="medium" selected>Trung bình</option>
        <option value="hard">Khó</option>
      </select>
    </div>
    
    <div class="form-group">
      <label class="form-label">Loại câu hỏi <span style="color: red;">*</span></label>
      <select name="type" id="type" class="form-input" required>
        <option value="">-- Chọn loại câu hỏi --</option>
        <option value="single_choice">Trắc nghiệm một lựa chọn</option>
        <option value="multiple_choice">Trắc nghiệm nhiều lựa chọn</option>
        <option value="true_false">Đúng/Sai</option>
        <option value="fill_in_blank">Điền từ</option>
        <option value="matching">Nối cặp</option>
      </select>
    </div>
    
    <div class="form-group">
      <label class="form-label">Nội dung câu hỏi <span style="color: red;">*</span></label>
      <textarea name="content" id="content" class="form-textarea" rows="4" placeholder="Nhập nội dung câu hỏi..." required></textarea>
    </div>
    
    <div class="form-group">
      <label class="form-label">URL hình ảnh/video (tùy chọn)</label>
      <input type="url" name="mediaUrl" id="mediaUrl" class="form-input" placeholder="https://..." />
    </div>
    
    <div class="form-group" id="answers-container">
      <!-- Dynamic answers fields will be inserted here -->
    </div>
    
    <div class="form-group">
      <button type="submit" class="btn btn-primary">Tạo câu hỏi</button>
      <a href="/admin/questions" class="btn" style="margin-left: 0.5rem;">Hủy</a>
    </div>
  </form>
</div>

<%- include("../partical/footer") %>

